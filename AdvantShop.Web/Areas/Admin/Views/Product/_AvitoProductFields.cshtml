@model AdvantShop.Web.Admin.Models.Catalog.Products.AdminProductModel
@{
    var isMobile = SettingsDesign.IsMobileTemplate;
}
<div>
    @if (!isMobile)
    {
        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-12">
                    <h2 class="inline product-setting-title content-header">
                        Свойства товара в авито
                    </h2>
                </div>
            </div>
        </div>
    }

    <div class="@(!isMobile ? "container-fluid" : "")" data-oc-lazy-load="[@Html.RenderAssetFilesList("avito")]">
        <div class="form-group row" ng-controller="AvitoCtrl as avito">
            <div class="col-xs-12" ng-init="avito.getProperties(@Model.ProductId)">
                <div class="m-b-sm">
                    <a href="http://autoload.avito.ru/format/" target="_blank">Описание формата файла автовыгрузки Авито</a>
                </div>

                <div class="form-group row middle-xs">
                    <div class="col-xs col-lg-4">
                        Название свойства в файле экспорта Авито
                    </div>
                    <div class="col-xs col-lg-4">
                        Значение свойства
                    </div>
                    <div class="col-xs-slim col-lg-4" style="visibility: hidden;">
                        @if (isMobile)
                        {
                            @Html.SvgSprite("remove", "", new { width = 16, height = 16 })
                        }
                        else
                        {
                            <span>Удалить</span>
                        }
                    </div>
                </div>
                <div class="ng-cloak" ng-if="avito.AvitoProductProperties.length > 0 ">
                    <div class="form-group row" ng-repeat="avitoPropertyPair in avito.AvitoProductProperties">
                        <div class="col-xs col-lg-4">
                            <input type="text" class="form-control input-alt" value="{{avitoPropertyPair.PropertyName}}" ng-model="avito.AvitoProductProperties[$index].PropertyName" placeholder="свойство" validation-input-not-cyrillic validation-input-text="Название свойства в файле экспорта Авито" />
                        </div>

                        <div class="col-xs col-lg-4">
                            <input type="text" class="form-control input-alt" value="{{avitoPropertyPair.PropertyValue}}" ng-model="avito.AvitoProductProperties[$index].PropertyValue" placeholder="значение свойства" />
                        </div>
                        <div class="col-xs-slim col-lg-4 flex middle-xs">
                            <a class="link-danger m-r-xs" ng-click="avito.deleteProductPropertyPair($index)">
                                @if (isMobile)
                                {
                                    @Html.SvgSprite("remove", "", new { width = 16, height = 16})
                                }else
                                {
                                    <span>Удалить</span>
                                }
                            </a>
                        </div>
                    </div>
                </div>
                <button type="button" class="btn btn-sm btn-success m-r-sm @(isMobile ? "btn--full-width": "")" ng-click="avito.addPropertyPair(@Model.ProductId)">
                    Добавить свойство
                </button>


                <div class="m-t m-b">
                    <a href="" class="btn btn-sm btn-action" ng-click="avito.saveProperties(@Model.ProductId)" data-button-validation ng-disabled="avitoForm.$invalid">
                        Сохранить настройки свойств в авито
                    </a>
                </div>

            </div>
        </div>
    </div>
</div>