@model AdvantShop.Web.Admin.Models.Settings.WarehouseSettings.WarehouseSettingsModel
@{
    var isMobile = SettingsDesign.IsMobileTemplate;
}

<div ng-controller="WarehousesListCtrl as warehousesList">
    @if (!isMobile)
    {
        <div class="sticky-page-name m-t-n-xs" sticky sticky-top="0">
            <div class="page-name-block sticky-page-name-inner">
                <div class="page-name-block-item-main flex middle-xs setting--flex-column @(isMobile ? "m-b" : "")">
                    <h2 class="sticky-page-name-text m-t-none setting--align-top setting__subtitle">
                        @T("Admin.Settings.Warehouses.Title")
                    </h2>
                </div>
                <div class="page-name-block-item-additional">
                    @Html.Button(T("Admin.Settings.Warehouses.AddWarehouse"), eButtonType.Add, link: Url.AbsoluteActionUrl("Add", "Warehouse"), icon: new ButtonIcon() { CssClass = "plus" })
                </div>
            </div>
        </div>
    }

    <div class="form-group row middle-xs setting__form-group" ng-init="settingsWarehouses.initWarehouses({label: '@Model.DefaultWarehouseName', value: '@Model.DefaultWarehouseId'})">
        <div class="col-xs-12 col-md-2 col-wl-2">
            <div class="setting-label-wrap setting__label">
                @T("Admin.Settings.Warehouses.DefaultWarehouse.Title")
            </div>
        </div>
        <div class="col-xs-12 col-md-4 relative @(isMobile ? "flex middle-xs" : "")" ng-if="settingsWarehouses.warehouses.length > 0">
            <select name="DefaultWarehouseId" class="form-control input-alt"
                    disabled-autobind="true"
                    ng-model="settingsWarehouses.DefaultWarehouseId">
                <option value="{{option.value}}" ng-repeat="option in settingsWarehouses.warehouses">{{option.label}}</option>
            </select>
            <help-trigger class="ng-cloak help-trigger-icon-abs @(isMobile ? "m-l-xs p-l-sm" : "m-l-xs")" classes="'setting__catalog-popover-custom'" data-title="@T("Admin.Settings.Warehouses.DefaultWarehouse.Title")">
                @T("Admin.Settings.Warehouses.DefaultWarehouse.About")
            </help-trigger>
        </div>
    </div>

    <div class="form-group row setting__form-group ng-cloak" data-ng-show="@Model.ShowSetCookieOnMainDomain.ToLowerString()">
        @if (!isMobile)
        {
            <div class="col-md-2">
                <div class="setting-label-wrap">
                    @Html.LabelFor(x => x.SetCookieOnMainDomain, T("Admin.SettingsSystem.SystemCommon.SetCookieOnMainDomain", Model.StoreUrl))
                </div>
            </div>
        }
        <div class="col-xs-12 col-md-6 @(isMobile ? "flex middle-xs" : "")">
            <label class="adv-checkbox-label @(isMobile ? "p-r-sm" : "")">
                @Html.CheckBoxFor(x => x.SetCookieOnMainDomain, new { @class = "adv-checkbox-input", ng_model = "settingsSystem.SetCookieOnMainDomain" })
                <span data-e2e="SetCookieOnMainDomain" class="adv-checkbox-emul"></span>
            </label>
            @if (isMobile)
            {
                <div class="setting-label-wrap setting__label setting--m-none flex-grow">
                    @Html.LabelFor(x => x.SetCookieOnMainDomain, T("Admin.SettingsSystem.SystemCommon.SetCookieOnMainDomain", Model.StoreUrl))
                </div>
            }
            <help-trigger class="ng-cloak @(isMobile ? "m-l-sm p-l-xs" : "p-l-xs")" data-title='@T("Admin.SettingsSystem.SystemCommon.SetCookieOnMainDomain", Model.StoreUrl)'>
                @T("Admin.Settings.SystemSettings.SetCookieOnMainDomainHint")
            </help-trigger>
        </div>
    </div>

    <div class="">
        <ui-grid-custom grid-unique-id="gridWarehouses"
                        grid-on-init="warehousesList.gridOnInit(grid)"
                        grid-options="warehousesList.gridOptions"
                        grid-row-identificator="'WarehouseId'"
                        grid-url="'warehouse/getwarehouses'"
                        grid-inplace-url="'warehouse/inplacewarehouse'"
                        grid-extend-ctrl="warehousesList"
                        grid-on-delete="settingsWarehouses.updateWarehouses()"
                        grid-on-inplace-apply="settingsWarehouses.updateWarehouses()"
                        grid-swipe-line="true">
            <ui-grid-custom-override-control class="ng-cloak">
                <div class="card card--gap-row-sm card--p-18" style="padding: 0">
                    <div class="flex between-xs center-xs">
                        <div class="flex-grow card__col m-r-xs card--p-18"
                             ng-click="grid.appScope.$ctrl.gridExtendCtrl.choose(row.entity.WarehouseId, row.entity.WarehouseName)">
                            {{row.entity.WarehouseName}}
                        </div>
                        <div class="card__col card__col--end setting--align-center card--p-18">
                            <ui-grid-custom-switch row="row"></ui-grid-custom-switch>
                        </div>
                    </div>
                </div>
            </ui-grid-custom-override-control>
        </ui-grid-custom>
    </div>
</div>
