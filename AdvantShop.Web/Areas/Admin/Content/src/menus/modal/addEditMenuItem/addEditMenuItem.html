<form is-mobile>
    <div class="modal-header">
        <ui-modal-cross ng-if="!isMobile.value"></ui-modal-cross>
        <h2 class="modal-header-title">
            {{ctrl.type == "add" ? ('Admin.Js.AddEditMenuItem.AddMenuItem'|translate) : ('Admin.Js.AddEditMenuItem.EditMenuItem'|translate)}}
        </h2>
    </div>
    <div class="modal-body">
        <div class="form-group setting__form-group">
            <div class="row">
                <label for="addEditMenuName" class="col-xs-12 col-md-3 control-label setting__label">
                    <span class="text-required">{{'Admin.Js.AddEditMenuItem.MenuItemName'|translate}}</span>
                </label>
                <div class="col-xs-12 col-md-9">
                    <input
                        type="text"
                        id="addEditMenuName"
                        class="form-control input-alt"
                        ng-model="ctrl.menuItem.MenuItemName"
                        required
                        validation-input-text="{{'Admin.Js.AddEditMenuItem.Name'|translate}}"
                        data-autofocus="!isMobile.value"
                        data-e2e="MenuItemName" />
                </div>
            </div>
        </div>

        <div class="form-group setting__form-group" ng-if="ctrl.menuType != 'Admin'">
            <div class="row">
                <label class="col-xs-12 col-md-3 control-label setting__label">{{'Admin.Js.AddEditMenuItem.LinkType'|translate}}</label>
                <div class="col-xs-12 col-md-9">
                    <div class="row">
                        <div class="col-xs-12 col-md-6">
                            <div class="m-b-sm">
                                <label class="adv-radio-label" data-e2e="StatPageNew">
                                    <input
                                        type="radio"
                                        data-convert-to-number
                                        class="adv-radio-input"
                                        value="-1"
                                        ng-model="ctrl.menuItem.MenuItemUrlType" />
                                    <span class="adv-radio-label-text">{{'Admin.Js.AddEditMenuItem.NewPage'|translate}}</span>
                                    <span class="adv-radio-emul"></span>
                                </label>
                            </div>

                            <div class="m-b-sm">
                                <label class="adv-radio-label" data-e2e="StatPage">
                                    <input
                                        type="radio"
                                        data-convert-to-number
                                        class="adv-radio-input"
                                        value="2"
                                        ng-model="ctrl.menuItem.MenuItemUrlType" />
                                    <span class="adv-radio-label-text">{{'Admin.Js.AddEditMenuItem.ExistingPage'|translate}}</span>
                                    <span class="adv-radio-emul"></span>
                                </label>
                            </div>

                            <div class="m-b-sm">
                                <label class="adv-radio-label" data-e2e="News">
                                    <input
                                        type="radio"
                                        data-convert-to-number
                                        class="adv-radio-input"
                                        value="3"
                                        ng-model="ctrl.menuItem.MenuItemUrlType" />
                                    <span class="adv-radio-label-text">{{'Admin.Js.AddEditMenuItem.News'|translate}}</span>
                                    <span class="adv-radio-emul"></span>
                                </label>
                            </div>

                            <div class="m-b-sm">
                                <label class="adv-radio-label" data-e2e="Link">
                                    <input
                                        type="radio"
                                        data-convert-to-number
                                        class="adv-radio-input"
                                        value="5"
                                        ng-model="ctrl.menuItem.MenuItemUrlType" />
                                    <span class="adv-radio-label-text">{{'Admin.Js.AddEditMenuItem.Link'|translate}}</span>
                                    <span class="adv-radio-emul"></span>
                                </label>
                            </div>
                        </div>

                        <!--<div class="col-xs-6">
                            <div class="m-b-sm">
                                <label class="adv-checkbox-label" data-e2e="Product">
                                    <input type="radio" class="adv-radio-input control-checkbox" value="0" ng-model="ctrl.menuItem.MenuItemUrlType" /> Товар
                                    <span class="adv-radio-emul"></span>
                                </label>
                            </div>

                            <div class="m-b-sm">
                                <label class="adv-checkbox-label" data-e2e="Category">
                                    <input type="radio" class="adv-radio-input control-checkbox" value="1" ng-model="ctrl.menuItem.MenuItemUrlType"/> Категория
                                    <span class="adv-radio-emul"></span>
                                </label>
                            </div>

                            <div class="m-b-sm">
                                <label class="adv-checkbox-label" data-e2e="Brand">
                                    <input type="radio" class="adv-radio-input control-checkbox" value="4" ng-model="ctrl.menuItem.MenuItemUrlType" /> Бренд
                                    <span class="adv-radio-emul"></span>
                                </label>
                            </div>
                        </div>-->
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group setting__form-group" ng-if="ctrl.menuItem.MenuItemUrlType == null || ctrl.menuItem.MenuItemUrlType == '-1'">
            <div class="row">
                <label for="addEditMenuPageName" class="col-xs-12 col-md-3 control-label setting__label">
                    <span class="text-required">{{'Admin.Js.AddEditMenuItem.PageTitle'|translate}}</span>
                </label>
                <div class="col-xs-12 col-md-9">
                    <div class="row">
                        <div class="col-xs-12">
                            <input
                                id="addEditMenuPageName"
                                type="text"
                                class="form-control input-alt"
                                ng-model="ctrl.newPageName"
                                required
                                validation-input-text="{{'Admin.Js.AddEditMenuItem.PageTitle'|translate}}"
                                data-e2e="MenuItemNamePage" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group setting__form-group" ng-if="ctrl.menuItem.MenuItemUrlType != null && ctrl.menuItem.MenuItemUrlType != '-1'">
            <div class="row">
                <label for="addEditMenuUrl" class="col-xs-12 col-md-3 control-label setting__label">
                    <span class="text-required" ng-if="ctrl.menuItem.MenuItemParentId > 0">{{'Admin.Js.AddEditMenuItem.URL'|translate}}</span>
                    <span ng-if="ctrl.menuItem.MenuItemParentId == 0">{{'Admin.Js.AddEditMenuItem.URL'|translate}}</span>
                </label>
                <div class="col-xs-12 col-md-9">
                    <div class="row">
                        <div ng-class="{'col-xs-12 col-md-9' : ctrl.menuItem.MenuItemUrlType != 5, 'col-xs-12' : ctrl.menuItem.MenuItemUrlType == 5}">
                            <input
                                id="addEditMenuUrl"
                                type="text"
                                class="form-control input-alt"
                                ng-model="ctrl.menuItem.MenuItemUrlPath"
                                ng-required="ctrl.menuItem.MenuItemParentId > 0"
                                validation-input-text="{{'Admin.Js.AddEditMenuItem.URL'|translate}}"
                                data-e2e="MenuItemURL" />
                        </div>
                        <div class="col-xs-3" ng-class="{'control-label' : !isMobile.value,'m-t-sm' : isMobile.value}">
                            <a ng-if="ctrl.menuItem.MenuItemUrlType != 5" ng-click="ctrl.changeUrl()" href=""
                                >{{'Admin.Js.AddEditMenuItem.Choose'|translate}}</a
                            >
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group setting__form-group" ng-if="ctrl.menuType != 'Mobile' && ctrl.menuType != 'Admin'">
            <div class="row">
                <label class="col-xs-12 col-md-3 control-label setting__label">{{'Admin.Js.AddEditMenuItem.Parent'|translate}}</label>
                <div class="col-xs-12 col-md-9" data-e2e="MenuItemParentName">
                    {{ctrl.menuItem.MenuItemParentName}}

                    <ui-modal-trigger
                        data-controller="'ModalChangeParentMenuItemCtrl'"
                        controller-as="ctrl"
                        data-on-close="ctrl.changeParentItem(result)"
                        data-resolve="{params: {showRoot: true, selected:ctrl.menuItem.MenuItemParentId, excludeId:ctrl.menuItem.MenuItemId, menuType: ctrl.menuType}}"
                        template-url="../areas/admin/content/src/menus/modal/changeParentMenuItem/changeParentMenuItem.html">
                        <a href="" class="edit">{{'Admin.Js.AddEditMenuItem.Edit'|translate}}</a>
                    </ui-modal-trigger>
                </div>
            </div>
        </div>

        <div class="form-group setting__form-group" ng-if="ctrl.menuType != 'Admin'">
            <div class="row middle-xs" ng-class="{'control-label' : !isMobile.value}">
                <label for="MenuItemBlankSelected" class="col-md-3 setting--m-none"> {{'Admin.Js.AddEditMenuItem.OpenNewTab'|translate}} </label>
                <div class="col-md-9 first-xs last-sm" ng-class="{'p-r-xs' : isMobile.value}">
                    <label class="adv-checkbox-label">
                        <input
                            id="MenuItemBlankSelected"
                            type="checkbox"
                            class="adv-checkbox-input control-checkbox"
                            ng-model="ctrl.menuItem.Blank"
                            data-e2e="MenuItemBlankSelected1" />
                        <span class="adv-checkbox-emul" data-e2e="MenuItemBlank"></span>
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group setting__form-group">
            <div class="row middle-xs" ng-class="{'control-label' : !isMobile.value}">
                <label for="MenuItemEnabledSelected2" class="col-md-3 setting--m-none"> {{'Admin.Js.AddEditMenuItem.Available'|translate}} </label>
                <div class="col-md-9 first-xs last-md" ng-class="{'p-r-xs' : isMobile.value}">
                    <label class="adv-checkbox-label">
                        <input
                            id="MenuItemEnabledSelected2"
                            type="checkbox"
                            class="adv-checkbox-input control-checkbox"
                            ng-model="ctrl.menuItem.Enabled"
                            data-e2e="MenuItemEnabledSelected" />
                        <span class="adv-checkbox-emul" data-e2e="MenuItemEnabled"></span>
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group setting__form-group" ng-if="ctrl.menuType != 'Admin'">
            <div class="row middle-xs" ng-class="{'control-label' : !isMobile.value}">
                <label for="addEditMenuNoFollow" class="col-md-3 setting--m-none"> {{'Admin.Js.AddEditMenuItem.DisableIndexing'|translate}} </label>
                <div class="col-md-9 first-xs last-sm" ng-class="{'p-r-xs' : isMobile.value}">
                    <label class="adv-checkbox-label">
                        <input
                            id="addEditMenuNoFollow"
                            type="checkbox"
                            class="adv-checkbox-input control-checkbox"
                            ng-model="ctrl.menuItem.NoFollow"
                            data-e2e="MenuItemNoFollowSelected" />
                        <span class="adv-checkbox-emul" data-e2e="MenuItemNoFollow"></span>
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group setting__form-group" ng-if="ctrl.menuType != 'Admin'">
            <div class="row">
                <label class="col-xs-12 col-md-3 control-label setting__label"> {{'Admin.Js.AddEditMenuItem.WhoToShow'|translate}} </label>
                <div class="col-xs-12 col-md-9">
                    <select
                        ng-model="ctrl.menuItem.ShowMode"
                        ng-options="s.label for s in ctrl.showModes track by s.value"
                        class="form-control input-alt"
                        data-e2e="MenuItemShowMode"></select>
                </div>
            </div>
        </div>

        <!--<div class="form-group">
            <div class="row">
                <label class="col-xs-3 control-label">Порядок сортировки</label>
                <div class="col-xs-9">
                    <input type="text" class="form-control" ng-model="ctrl.menuItem.SortOrder"/>
                </div>
            </div>
        </div>-->

        <div class="form-group setting__form-group">
            <div class="row">
                <label class="col-xs-12 col-md-3 control-label setting__label">{{'Admin.Js.AddEditMenuItem.Icon'|translate}}</label>
                <div class="col-xs-12 col-md-9">
                    <img
                        ng-if="ctrl.menuItem.MenuItemIconPath != null && ctrl.menuItem.MenuItemIconPath.length > 0"
                        ng-src="{{ctrl.menuItem.MenuItemIconPath}}"
                        style="{{isMobile.value ? 'max-width:140px;' : ''}}" />

                    <div class="m-t-sm">
                        <div>
                            <a
                                href=""
                                accept="image/*"
                                ngf-max-size="15MB"
                                ngf-select=""
                                ngf-change="ctrl.uploadIcon($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"
                                class="picture-uploader-buttons-add">
                                {{'Admin.Js.AddEditMenuItem.AddImage'|translate}}
                            </a>
                        </div>
                        <div ng-if="ctrl.menuItem.MenuItemIconPath != null && ctrl.menuItem.MenuItemIconPath.length > 0">
                            <a href="" class="picture-uploader-buttons-delete link-danger" ng-click="ctrl.deleteIcon()"
                                >{{'Admin.Js.AddEditMenuItem.DeleteImage'|translate}}</a
                            >
                        </div>
                    </div>
                    <div ng-if="!isMobile.value" class="m-t-xs">
                        <label
                            >{{'Admin.Js.AddEditMenuItem.RecommendedSizes'|translate}}: 24 х 24, 36 x 24, 48 x 24
                            <span ng-if="ctrl.menuType != 'Admin'">, 30 x 30.</span></label
                        >
                        <label>{{'Admin.Js.AddEditMenuItem.AvailableFormats'|translate}}: *.gif, *.png, *.jpg, *.jpeg, *.bmp</label>
                    </div>
                </div>
                <div ng-if="isMobile.value" class="m-t-sm col-xs-12 fs-xs">
                    <label
                        >{{'Admin.Js.AddEditMenuItem.RecommendedSizes'|translate}}: 24 х 24, 36 x 24, 48 x 24
                        <span ng-if="ctrl.menuType != 'Admin'">, 30 x 30.</span></label
                    >
                    <label>{{'Admin.Js.AddEditMenuItem.AvailableFormats'|translate}}: *.gif, *.png, *.jpg, *.jpeg, *.bmp</label>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-save btn-primary" type="button" data-button-validation-success="ctrl.save()" data-button-validation>
            {{ctrl.type == "add" ? ('Admin.Js.AddEdit.Add'|translate) : ('Admin.Js.AddEdit.Save'|translate)}}
        </button>
        <button class="btn btn-default btn-cancel" type="button" ng-click="ctrl.close()">{{'Admin.Js.AddEdit.Cancel'|translate}}</button>
    </div>
</form>
