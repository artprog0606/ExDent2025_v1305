<div class="col-xs-12 col-md-6 m-t-md order-items-summary__col list-group" data-is-mobile>
    <div class="m-b-xs order-items-summary__row">
        <div class="order-items-summary-col-value inline order-items-summary__col">
            <div class="order-items-summary__text order-items-summary__text--alt">{{'Admin.Js.OrderItemsSummary.TotalWeight' | translate}}:</div>
        </div>
        <div class="bold inline order-items-summary__col" ng-switch="$ctrl.weightEdit === true && !isMobile.value">
            <form class="order-items-demensions__block order-items-summary__weight-form" ng-switch-when="true">
                <input
                    class="form-control order-items-demensions__input order-items-summary__input input-alt"
                    type="text"
                    name="orderItemsSummaryDemensionsTotalWeight"
                    validation-input-min="0"
                    validation-input-float
                    validation-input-text="Вес"
                    ng-model="$ctrl.Summary.TotalWeight" />
                <span class="order-items-summary__text">кг</span>
                <span class="order-items-summary__btns-wrap">
                    <button
                        type="submit"
                        class="far fa-check-circle order-items-demensions__button order-items-demensions__button--confirm order-items-summary__confirm-btn"
                        data-button-validation="$ctrl.weightApplyEdit()"></button>
                    <button
                        type="button"
                        class="fas fa-ban order-items-demensions__button order-items-demensions__button--danger order-items-summary__cancel-btn"
                        ng-click="$ctrl.weightCancelEdit()"></button>
                </span>
            </form>
            <span class="order-items-demensions__block order-items-summary__weight-total-block" ng-switch-default>
                <span class="order-items-demensions__text order-items-summary__text" ng-bind="$ctrl.Summary.TotalWeight"></span>
                <span class="order-items-summary__text">кг</span>
                <button
                    data-ng-if="!isMobile.value"
                    type="button"
                    aria-label="Редактировать"
                    class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small order-items-summary__edit-btn"
                    ng-click="$ctrl.weightStartEdit()"></button>

                <ui-modal-trigger
                    data-ng-if="isMobile.value"
                    size="lg"
                    data-controller="'ModalEditFormFieldCtrl'"
                    data-controller-as="ctrl"
                    data-resolve="{params: {fields: $ctrl.weightFormFields, title: 'Admin.Js.OrderItemsSummary.TotalWeight'}}"
                    data-on-close="$ctrl.weightApplyEdit(result)"
                    data-on-dismiss="$ctrl.weightCancelEdit()"
                    data-on-before-open="$ctrl.weightStartEdit()"
                    template-url="../areas/admin/content/src/_shared/modal/editFormField/editFormField.html">
                    <button
                        type="button"
                        aria-label="Редактировать"
                        class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small order-items-summary__edit-btn"></button>
                </ui-modal-trigger>
                <span class="order-items-note order-items-summary__note" ng-hide="$ctrl.Summary.IsNotEditedWeight">(ред.)</span>
            </span>
        </div>
        <div class="inline order-items-summary__col order-items-summary__weight-shipping-block" ng-if="$ctrl.Summary.ShippingUseWeight">
            <span class="order-items-demensions__block order-items-summary__text">
                (для доставки<span
                    class="order-items-demensions__text order-items-summary__weight-shipping-total"
                    ng-bind="$ctrl.Summary.TotalWeightFromShipping"></span
                >кг)
            </span>
        </div>
    </div>
    <div class="m-b-xs order-items-summary__row">
        <div class="order-items-summary-col-value inline order-items-summary__col">
            <div class="order-items-summary__text order-items-summary__text--alt">{{'Admin.Js.OrderItemsSummary.TotalDemensions' | translate}}:</div>
        </div>
        <div class="bold inline order-items-summary__col" ng-switch="$ctrl.demensionsEdit === true && !isMobile.value">
            <form class="order-items-demensions__block order-items-summary__dimensions-form" ng-switch-when="true">
                <input
                    class="form-control order-items-demensions__input order-items-summary__input input-alt"
                    type="text"
                    name="orderItemsSummaryDemensionsTotalLength"
                    validation-input-min="0"
                    validation-input-float
                    validation-input-text="Длина"
                    ng-model="$ctrl.Summary.TotalLength" />
                <span class="order-items-summary__text">x</span>
                <input
                    class="form-control order-items-demensions__input order-items-summary__input input-alt"
                    type="text"
                    name="orderItemsSummaryDemensionsTotalWidth"
                    validation-input-min="0"
                    validation-input-float
                    validation-input-text="Ширина"
                    ng-model="$ctrl.Summary.TotalWidth" />
                <span class="order-items-summary__text">x</span>
                <input
                    class="form-control order-items-demensions__input order-items-summary__input input-alt"
                    type="text"
                    name="orderItemsSummaryDemensionsTotalHeight"
                    validation-input-min="0"
                    validation-input-float
                    validation-input-text="Высота"
                    ng-model="$ctrl.Summary.TotalHeight" />

                <span class="order-items-summary__text">мм</span>
                <span class="order-items-summary__btns-wrap">
                    <button
                        type="submit"
                        class="far fa-check-circle order-items-demensions__button order-items-demensions__button--confirm order-items-summary__confirm-btn"
                        data-button-validation="$ctrl.demensionsApplyEdit()"></button>
                    <button
                        type="button"
                        class="fas fa-ban order-items-demensions__button order-items-demensions__button--danger order-items-summary__cancel-btn"
                        ng-click="$ctrl.demensionsCancelEdit()"></button>
                </span>
            </form>
            <span class="order-items-demensions__block order-items-summary__dimensions-block" ng-switch-default>
                <span class="order-items-demensions__text order-items-summary__text" ng-bind="$ctrl.Summary.TotalLength"></span>
                <span class="order-items-summary__text">x</span>
                <span class="order-items-demensions__text order-items-summary__text" ng-bind="$ctrl.Summary.TotalWidth"></span>
                <span class="order-items-summary__text">x</span>
                <span class="order-items-demensions__text order-items-summary__text" ng-bind="$ctrl.Summary.TotalHeight"></span>
                <span class="order-items-summary__text">мм</span>
                <button
                    data-ng-if="!isMobile.value"
                    type="button"
                    aria-label="Редактировать"
                    class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small order-items-summary__edit-btn"
                    ng-click="$ctrl.demensionsStartEdit()"></button>

                <ui-modal-trigger
                    data-ng-if="isMobile.value"
                    size="lg"
                    data-controller="'ModalEditFormFieldCtrl'"
                    data-controller-as="ctrl"
                    data-resolve="{params: {fields: $ctrl.demensionsFields, title: 'Admin.Js.OrderItemsSummary.TotalDemensions'}}"
                    data-on-close="$ctrl.demensionsApplyEdit(result)"
                    data-on-dismiss="$ctrl.demensionsCancelEdit()"
                    data-on-before-open="$ctrl.demensionsStartEdit()"
                    template-url="../areas/admin/content/src/_shared/modal/editFormField/editFormField.html">
                    <button
                        type="button"
                        aria-label="Редактировать"
                        class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small order-items-summary__edit-btn"></button>
                </ui-modal-trigger>

                <span class="order-items-note order-items-summary__note" ng-hide="$ctrl.Summary.IsNotEditedDimensions">(ред.)</span>
            </span>
        </div>
        <div class="inline order-items-summary__col" ng-if="$ctrl.Summary.ShippingUseDemensions">
            <span class="order-items-demensions__block order-items-summary__dimensions-shipping-block">
                <span class="order-items-summary__text">
                    (для доставки
                    <span class="order-items-demensions__text order-items-summary__text" ng-bind="$ctrl.Summary.TotalLengthFromShipping"></span>
                    <span class="order-items-summary__text">x</span>
                    <span class="order-items-demensions__text order-items-summary__text" ng-bind="$ctrl.Summary.TotalWidthFromShipping"></span>
                    <span class="order-items-summary__text">x</span>
                    <span class="order-items-demensions__text order-items-summary__text" ng-bind="$ctrl.Summary.TotalHeightFromShipping"></span>
                    <span class="order-items-summary__text">мм</span>
                    )
                </span>
            </span>
        </div>
    </div>
    <div class="m-b-xs order-items-summary__row">
        <div class="m-b-xs order-items-summary__col relative">
            <span class="order-items-summary__text order-items-summary__text--alt">{{'Admin.Js.OrderItemsSummary.UsersComment' | translate}}:</span>
            <button
                type="button"
                ng-if="!isMobile.value && ($ctrl.isEdit === true && !$ctrl.customerCommentEdit && ($ctrl.Summary.CustomerComment == null || $ctrl.Summary.CustomerComment.length == 0))"
                class="fas fa-pencil-alt order-items-summary__edit-btn order-items-demensions__button order-items-demensions__button--small"
                aria-label="Редактировать"
                ng-click="$ctrl.customerCommentStartEdit()"></button>
            <ui-modal-trigger
                data-ng-if="isMobile.value && ($ctrl.isEdit === true && !$ctrl.customerCommentEdit && ($ctrl.Summary.CustomerComment == null || $ctrl.Summary.CustomerComment.length == 0))"
                size="lg"
                data-controller="'ModalEditFormFieldCtrl'"
                data-controller-as="ctrl"
                data-resolve="{params: {fields: $ctrl.commentField, title: 'Js.Order.CustomerComment'}}"
                data-on-close="$ctrl.customerCommentApplyEdit(result)"
                data-on-dismiss="$ctrl.customerCommentCancelEdit(result)"
                data-on-before-open="$ctrl.customerCommentStartEdit()"
                template-url="../areas/admin/content/src/_shared/modal/editFormField/editFormField.html">
                <button type="button" aria-label="Редактировать" class="fas fa-pencil-alt order-items-summary__edit-btn"></button>
            </ui-modal-trigger>
        </div>
        <div ng-switch="$ctrl.customerCommentEdit === true && !isMobile.value" class="order-items-summary__col">
            <div ng-switch-when="true">
                <textarea
                    class="form-control order-items-summary__textarea textarea-alt"
                    rows="3"
                    ng-model="$ctrl.Summary.CustomerComment"></textarea>
                <span class="order-items-summary__btns-wrap">
                    <button
                        type="button"
                        class="far fa-check-circle order-items-demensions__button order-items-demensions__button--confirm order-items-summary__confirm-btn"
                        ng-click="$ctrl.customerCommentApplyEdit()"></button>
                    <button
                        type="button"
                        class="fas fa-ban order-items-demensions__button order-items-demensions__button--danger order-items-summary__cancel-btn"
                        ng-click="$ctrl.customerCommentCancelEdit()"></button>
                </span>
            </div>
            <div ng-switch-default>
                <span class="bold order-items-summary__text" ng-bind-html="$ctrl.Summary.CustomerComment"></span>
                <button
                    type="button"
                    ng-if="!isMobile.value && ($ctrl.isEdit === true && $ctrl.Summary.CustomerComment != null && $ctrl.Summary.CustomerComment.length > 0)"
                    class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small order-items-summary__edit-btn"
                    aria-label="Редактировать"
                    ng-click="$ctrl.customerCommentStartEdit()"></button>
                <ui-modal-trigger
                    data-ng-if="isMobile.value && ($ctrl.isEdit === true && $ctrl.Summary.CustomerComment != null && $ctrl.Summary.CustomerComment.length > 0)"
                    size="lg"
                    data-controller="'ModalEditFormFieldCtrl'"
                    data-controller-as="ctrl"
                    data-resolve="{params: {fields: $ctrl.commentField, title: 'Js.Order.CustomerComment'}}"
                    data-on-close="$ctrl.customerCommentApplyEdit(result)"
                    data-on-dismiss="$ctrl.customerCommentCancelEdit(result)"
                    data-on-before-open="$ctrl.customerCommentStartEdit()"
                    template-url="../areas/admin/content/src/_shared/modal/editFormField/editFormField.html">
                    <button
                        type="button"
                        aria-label="Редактировать"
                        class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small order-items-summary__edit-btn"></button>
                </ui-modal-trigger>
            </div>
        </div>
    </div>
    <div class="m-b-xs order-items-summary__row" ng-if="$ctrl.Summary.ShowCountDevices">
        <div class="m-b-xs order-items-summary__col relative">
            <span class="order-items-summary__text order-items-summary__text--alt">{{'Admin.Js.OrderItemsSummary.CountDevices' | translate}}:</span>
            <span ng-if="!$ctrl.countDevicesEdit">
                <span ng-if="$ctrl.Summary.CountDevices >= 0" ng-bind="$ctrl.Summary.CountDevices"></span>
                <span ng-if="$ctrl.Summary.CountDevices == null || $ctrl.Summary.CountDevices < 0">Не указано</span>
            </span>
            <input type="number" class="input-small" ng-if="$ctrl.countDevicesEdit" max="1000" ng-model="$ctrl.Summary.CountDevices" />
            <button
                type="button"
                ng-if="$ctrl.isEdit === true && !$ctrl.countDevicesEdit"
                class="fas fa-pencil-alt order-items-summary__edit-btn count-devices__button count-devices__button--small"
                aria-label="Редактировать"
                ng-click="$ctrl.countDevicesStartEdit()"></button>
            <span ng-if="$ctrl.countDevicesEdit" class="order-items-summary__btns-wrap">
                <button
                    type="button"
                    class="far fa-check-circle count-devices__button count-devices__button--confirm order-items-summary__confirm-btn"
                    ng-click="$ctrl.countDevicesApplyEdit()"></button>
                <button
                    type="button"
                    class="fas fa-ban count-devices__button count-devices__button--danger order-items-summary__cancel-btn"
                    ng-click="$ctrl.countDevicesCancelEdit()"></button>
            </span>
        </div>
    </div>
    <div class="m-b-xs order-items-summary__row">
        <div class="m-b-xs order-items-summary__col relative">
            <span class="order-items-summary__text order-items-summary__text--alt"></span>
            <div class="row">
                <div class="col-xs-12 col-md-8">
                    <a ng-if="$ctrl.Summary.CustomerOrderAttachments.length > 0" ng-click="$ctrl.goToCustomerOrderAttachments()"
                        >{{'Admin.Js.OrderItemsSummary.Files' | translate}}</a
                    >
                </div>
            </div>
        </div>
    </div>
    <div ng-if="$ctrl.Summary.DontCallBack" class="m-b-xs order-items-summary__row">
        <div>
            <span class="bold order-items-summary__text">{{'Admin.Js.OrderItemsSummary.DontCallBack' | translate}}</span>
        </div>
    </div>
    <div ng-if="$ctrl.Summary.ReceivingMethod != null" class="m-b-xs order-items-summary__row">
        <span class="order-items-summary__text order-items-summary__text--alt">{{'Admin.Js.OrderItemsSummary.ReceivingMethod' | translate}}:</span>
        <span ng-switch="$ctrl.Summary.ReceivingMethod">
            <span ng-switch-when="0" class="bold order-items-summary__text">{{'Admin.Js.OrderItemsSummary.ReceivingMethod.InHall' | translate}}</span>
            <span ng-switch-when="1" class="bold order-items-summary__text"
                >{{'Admin.Js.OrderItemsSummary.ReceivingMethod.WithYou' | translate}}</span
            >
        </span>
    </div>
    <div ng-transclude="footerLeft" class="block block--mobile-transparent m-t-md"></div>
</div>
<div class="col-xs-12 col-md-6 m-t-md order-items-summary__col">
    <div class="row m-b-md order-items-summary__row">
        <div class="col-xs order-items-summary__col">
            <div class="text-right order-items-summary__text order-items-summary__text--alt">
                {{'Admin.Js.OrderItemsSummary.OrderCost' | translate}}
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value bold order-items-summary__col">
            <span class="order-items-summary__text" ng-bind="$ctrl.Summary.ProductsCostStr"></span>
        </div>
    </div>
    <div class="row m-b-md order-items-summary__row">
        <div class="text-right col-xs order-items-summary__col order-items-summary__text order-items-summary__text--alt">
            {{'Admin.Js.OrderItemsSummary.OrderDiscount' | translate }}
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col">
            <div class="bold">
                <span class="order-items-summary__text" ng-bind="'- ' + $ctrl.Summary.ProductsDiscountPriceStr" data-e2e="OrderDiscount"></span>
                <span
                    ng-if="$ctrl.Summary.OrderDiscount > 0"
                    class="order-discount order-items-summary__text"
                    ng-bind="'(' + $ctrl.Summary.OrderDiscount + '%)'"></span>
            </div>
            <div ng-switch="$ctrl.isEdit === true">
                <div ng-switch-when="true" class="order-items-summary__text order-items-summary__text--alt">
                    <a
                        href=""
                        uib-popover-template="'orderDiscountPopover.html'"
                        popover-trigger="'none'"
                        popover-class="popover--with-form popover--modalify popover--mobile"
                        popover-is-open="$ctrl.discountPopoverIsOpen"
                        ng-click="$ctrl.discountPopoverToggle()"
                        ng-bind="$ctrl.Summary.OrderDiscount != 0 || $ctrl.Summary.OrderDiscountValue != 0 ?  ('Admin.Js.OrderItemsSummary.Discount'|translate) : ('Admin.Js.OrderItemsSummary.AddDiscount'|translate)"></a>
                    <script type="text/ng-template" id="orderDiscountPopover.html">
                        <form name="orderFormDiscount" class="order-items-summary__text" is-mobile>
                            <div ng-class="{'modal-header': isMobile.value, 'm-b-xs bold': !isMobile.value}">
                                <div ng-class="{'modal-header-title': isMobile.value,
                                                'order-items-summary__row order-items-summary__row--full-width control-label': !isMobile.value}">
                                    {{::'Admin.Js.OrderItemsSummary.SpecifyDiscount' | translate}}
                                </div>
                            </div>
                            <div ng-class="{'modal-body': isMobile.value}">
                                <div class="input-group m-b order-items-summary__input-group">
                                    <span class="input-group-btn" ng-class="{'input-group-btn-discount--left':isMobile.value}">
                                        <button type="button" class="btn btn-default" value="0"
                                                ng-click="$ctrl.toggleselectCurrencyLabel('0')"
                                                ng-class="{'label-currency-active btn-default--active':!$ctrl.typeDiscountPercent}">
                                            <span>{{$ctrl.Summary.OrderCurrency.CurrencySymbol}}</span>
                                        </button>
                                        <button type="button" class="btn btn-default" value="1"
                                                ng-click="$ctrl.toggleselectCurrencyLabel('1')"
                                                ng-class="{'label-currency-active btn-default--active':$ctrl.typeDiscountPercent}">
                                            <span>%</span>
                                        </button>
                                    </span>

                                    <input ng-value="$ctrl.OrderDiscountNew"
                                           ng-max="$ctrl.typeDiscountPercent ? 100 : $ctrl.Summary.ProductsCost"
                                           ng-min="0"
                                           ng-change="$ctrl.changeDiscountHandler($ctrl.OrderDiscountNew)"
                                           class="form-control input-alt"
                                           ng-model="$ctrl.OrderDiscountNew" data-autofocus="!isMobile.value" bs-modifiable="false"
                                           validation-input-float=""
                                           validation-input-text="{{:: 'Admin.Js.OrderItemsSummary.SpecifyDiscount'|translate}}" />
                                </div>
                            </div>
                            <div ng-class="{'modal-footer': isMobile.value,'clearfix': !isMobile.value}">
                                <input type="submit" button-validation="$ctrl.changeDiscount($ctrl.OrderDiscountNew)"
                                       value="{{'Admin.Js.OrderItemsSummary.Apply'|translate}}"
                                       class="btn btn-sm pull-left"
                                       ng-class="{'btn-primary': isMobile.value, 'btn-success': !isMobile.value}" />
                                <input type="button" value="{{'Admin.Js.AddEdit.Cancel'|translate}}"
                                       class="btn btn-sm pull-right"
                                       ng-class="{'btn-default btn-cancel': isMobile.value, 'btn-action': !isMobile.value}"
                                       ng-click="$ctrl.discountPopoverClose()" />
                            </div>
                        </form>
                    </script>
                </div>
                <div ng-switch-when="false">
                    <a
                        href=""
                        ng-click="$ctrl.onStopEdit({})"
                        ng-bind="$ctrl.Summary.OrderDiscount > 0 || $ctrl.Summary.OrderDiscountValue != 0 ?  ('Admin.Js.OrderItemsSummary.Discount'|translate) : ('Admin.Js.OrderItemsSummary.AddDiscount'|translate)"></a>
                </div>
            </div>
        </div>
    </div>

    <div
        class="row m-b-md order-items-summary__row"
        ng-if="$ctrl.Summary.Coupon == null && $ctrl.Summary.Certificate == null && $ctrl.isEdit === true">
        <div class="text-right col-xs order-items-summary__col order-items-summary__text order-items-summary__text--alt">
            {{'Admin.Js.OrderItemsSummary.CouponCertificate' | translate}}
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col">
            <a
                href=""
                uib-popover-template="'orderCouponsPopover.html'"
                popover-trigger="'none'"
                popover-is-open="$ctrl.couponsPopoverIsOpen"
                popover-class="popover--with-form popover--modalify popover--mobile"
                ng-click="$ctrl.couponsPopoverToggle()"
                >{{'Admin.Js.OrderItemsSummary.AddCoupon' | translate}}</a
            >
            /

            <a
                href=""
                uib-popover-template="'orderCertificatePopover.html'"
                popover-trigger="'none'"
                popover-is-open="$ctrl.certificatePopoverIsOpen"
                popover-class="popover--with-form popover--modalify popover--mobile"
                ng-click="$ctrl.certificatePopoverToggle()"
                >{{'Admin.Js.OrderItemsSummary.AddCertificate' | translate}}</a
            >

            <script type="text/ng-template" id="orderCouponsPopover.html">
                <form name="orderFormCoupons" is-mobile>
                    <div ng-class="{'modal-header': isMobile.value, 'm-b-xs bold': !isMobile.value}">
                        <div ng-class="{'modal-header-title': isMobile.value,
                                        'm-b-xs bold  order-items-summary__row order-items-summary__row--full-width control-label': !isMobile.value}">
                            {{::'Admin.Js.OrderItemsSummary.AddCoupon' | translate}}
                        </div>
                    </div>
                    <div ng-class="{'modal-body': isMobile.value}">
                        <div class="input-group m-b order-items-summary__input-group" style="width: 100%;">
                            <input type="text"
                                   class="form-control input-alt"
                                   ng-model="$ctrl.CouponCode" data-autofocus="!isMobile.value" bs-modifiable="false"
                                   validation-input-text="{{:: 'Admin.Js.OrderItemsSummary.CouponCode'|translate}}" />
                        </div>
                    </div>
                    <div ng-class="{'modal-footer': isMobile.value,'clearfix': !isMobile.value}">
                        <input type="submit" button-validation="$ctrl.changeCoupon($ctrl.CouponCode)"
                               value="{{'Admin.Js.OrderItemsSummary.Apply'|translate}}"
                               class="btn btn-sm pull-left"
                               ng-class="{'btn-primary': isMobile.value, 'btn-success': !isMobile.value}" />
                        <input type="button" value="{{'Admin.Js.AddEdit.Cancel'|translate}}"
                               class="btn btn-sm pull-right"
                               ng-class="{'btn-default btn-cancel': isMobile.value, 'btn-action': !isMobile.value}"
                               ng-click="$ctrl.couponsPopoverClose()" />
                    </div>
                </form>
            </script>

            <script type="text/ng-template" id="orderCertificatePopover.html">
                <form name="orderFormCertificate" data-is-mobile>
                    <div ng-class="{'modal-header': isMobile.value, 'm-b-xs bold': !isMobile.value}">
                        <div ng-class="{'modal-header-title': isMobile.value,
                                        'm-b-xs bold  order-items-summary__row order-items-summary__row--full-width control-label': !isMobile.value}">
                            {{'Admin.Js.OrderItemsSummary.AddCertificateTitle' | translate}}
                        </div>
                    </div>
                    <div ng-class="{'modal-body': isMobile.value}">
                        <div class="input-group m-b order-items-summary__input-group" style="width: 100%;">
                            <input type="text"
                                   class="form-control input-alt"
                                   ng-model="$ctrl.CertificateCode" data-autofocus="!isMobile.value" bs-modifiable="false"
                                   validation-input-text="{{:: 'Admin.Js.OrderItemsSummary.CertificateCode'|translate}}" />
                        </div>
                    </div>
                    <div ng-class="{'modal-footer': isMobile.value,'clearfix': !isMobile.value}">
                        <input type="submit" button-validation="$ctrl.changeCertificate($ctrl.CertificateCode)"
                               value="{{'Admin.Js.OrderItemsSummary.Apply'|translate}}"
                               class="btn btn-sm pull-left"
                               ng-class="{'btn-primary': isMobile.value, 'btn-success': !isMobile.value}" />
                        <input type="button" value="{{'Admin.Js.AddEdit.Cancel'|translate}}"
                               class="btn btn-sm pull-right" ng-click="$ctrl.certificatePopoverClose()"
                               ng-class="{'btn-default btn-cancel': isMobile.value, 'btn-action': !isMobile.value}" />
                    </div>
                </form>
            </script>
        </div>
    </div>

    <div class="row m-b-md order-items-summary__row" ng-if="$ctrl.Summary.Certificate != null">
        <div class="col-xs order-items-summary__col">
            <div class="text-right order-items-summary__text">
                {{'Admin.Js.OrderItemsSummary.CertificateTitle' | translate}} ({{$ctrl.Summary.Certificate.Code}})
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col bold">
            <span class="order-items-summary__text" ng-bind="'- ' + $ctrl.Summary.CertificatePriceStr"></span>
            <a ng-if="$ctrl.isEdit == true" href="" ng-click="$ctrl.removeCertificate()" class="link-invert link-decoration-none fas fa-times"></a>
        </div>
    </div>

    <div class="row m-b-md order-items-summary__row" ng-if="$ctrl.Summary.Coupon != null">
        <div class="col-xs order-items-summary__col">
            <div class="text-right order-items-summary__text">
                {{'Admin.Js.OrderItemsSummary.Coupon' | translate}}
                <div ng-bind="$ctrl.Summary.Coupon"></div>
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col bold">
            <span class="order-items-summary__text" ng-bind="'- ' + $ctrl.Summary.CouponPriceStr" data-e2e="CouponPrice"></span>
            <div>
                <a ng-if="$ctrl.isEdit == true" href="" ng-click="$ctrl.removeCoupon()">{{'Admin.Js.OrderItemsSummary.RemoveCoupon' | translate}}</a>
            </div>
        </div>
    </div>

    <div class="row m-b-md ng-cloak order-items-summary__row" ng-if="!$ctrl.Summary.CanChangeBonusAmount && $ctrl.Summary.BonusCost != 0">
        <div class="col-xs order-items-summary__col">
            <div class="text-right order-items-summary__text">{{'Admin.Js.OrderItemsSummary.Bonuses' | translate}}</div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col bold">
            <span ng-bind="'- ' + $ctrl.Summary.BonusCost"></span>
        </div>
    </div>
    <div class="row m-b-md ng-cloak order-items-summary__row" ng-if="$ctrl.Summary.CanChangeBonusAmount && $ctrl.isEdit">
        <div class="col-xs order-items-summary__col">
            <div class="text-right order-items-summary__text order-items-summary__text--alt">
                <a
                    href=""
                    uib-popover-template="'orderBonusesPopover.html'"
                    popover-trigger="'none'"
                    popover-is-open="$ctrl.bonusesPopoverIsOpen"
                    popover-class="popover--with-form popover--modalify popover--mobile"
                    ng-click="$ctrl.bonusesPopoverToggle()"
                    data-e2e="BonusPay">
                    {{'Admin.Js.OrderItemsSummary.BonusPayments' | translate}}
                </a>

                <script type="text/ng-template" id="orderBonusesPopover.html">
                    <form name="orderFormBonuses" data-is-mobile="">
                        <div ng-class="{'modal-header': isMobile.value, 'm-b-xs bold': !isMobile.value}">
                            <div ng-class="{'modal-header-title': isMobile.value,
                                        'm-b-xs bold  order-items-summary__row order-items-summary__row--full-width control-label': !isMobile.value}"
                                 data-e2e="BonusesAvailable">
                                {{'Admin.Js.OrderItemsSummary.UseBonuses' | translate}}
                                <br>({{'Admin.Js.OrderItemsSummary.Available' | translate}}
                                {{$ctrl.Summary.BonusesAvailable}}
                                {{'Admin.Js.OrderItemsSummary.AvailableBonuses' | translate}})
                            </div>
                        </div>
                        <div ng-class="{'modal-body': isMobile.value}">
                            <div class="m-b order-items-summary__input-group">
                                <input type="number" value="" class="form-control input-alt-mobile"
                                       ng-model="$ctrl.Summary.BonusesUseNew"
                                       ng-max="$ctrl.Summary.BonusesAvailable > 0 ? $ctrl.Summary.BonusesAvailable : 0"
                                       ng-min="0"
                                       min="0"
                                       max="{{$ctrl.Summary.BonusesAvailable > 0 ? $ctrl.Summary.BonusesAvailable : 0}}"
                                       ng-keyup="$event.keyCode === 13 && $ctrl.useBonuses($ctrl.Summary.BonusesUseNew)"
                                       autofocus data-e2e="BonusesUseAdd" />
                            </div>
                        </div>
                        <div ng-class="{'modal-footer': isMobile.value,'clearfix': !isMobile.value}">
                            <input type="button" value="{{'Admin.Js.OrderItemsSummary.Use'|translate}}"
                                   class="btn btn-sm pull-left"
                                   ng-class="{'btn-primary': isMobile.value, 'btn-success m-r': !isMobile.value}"
                                   disabled ng-disabled="!orderFormBonuses.modified || $ctrl.Summary.BonusesUseNew > $ctrl.Summary.BonusesAvailable || $ctrl.Summary.BonusesUseNew < 0"
                                   ng-click="$ctrl.useBonuses($ctrl.Summary.BonusesUseNew)" data-e2e="BonusesUse" />
                            <input type="button" value="{{'Admin.Js.AddEdit.Cancel'|translate}}"
                                   class="btn btn-sm pull-right"
                                   ng-class="{'btn-default btn-cancel': isMobile.value, 'btn-action': !isMobile.value}"
                                   ng-click="$ctrl.bonusesPopoverClose()"
                                   data-e2e="BonusesUseCancel" />
                        </div>
                    </form>
                </script>
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col bold">
            <span class="order-items-summary__text" ng-bind="'- ' + $ctrl.Summary.BonusCost" data-e2e="BonusCost"></span>
        </div>
    </div>

    <div class="row m-b-md order-items-summary__row">
        <div class="col-xs order-items-summary__col">
            <div class="text-right order-items-summary__text order-items-summary__text--alt">
                <span class="relative" ng-switch="$ctrl.isEdit === true">
                    <span ng-switch-when="true">
                        <ui-modal-trigger
                            size="middle"
                            data-controller="'ModalShippingsCtrl'"
                            data-controller-as="ctrl"
                            data-resolve="{ shippingMethodId: $ctrl.Summary.ShippingMethodId, order: { orderId: $ctrl.orderId, country: $ctrl.country, region: $ctrl.region, district: $ctrl.district, city: $ctrl.city, zip: $ctrl.zip, street: $ctrl.street, house: $ctrl.house, structure: $ctrl.structure, apartment: $ctrl.apartment, entrance: $ctrl.entrance, floor: $ctrl.floor }}"
                            data-on-close="$ctrl.changeShipping(result)"
                            template-url="../areas/admin/content/src/order/modal/shippings/shippings.html">
                            <a href="" class="m-b-xs order-items-summary__link">{{'Admin.Js.OrderItemsSummary.Delivery' | translate}}</a>
                        </ui-modal-trigger>
                    </span>
                    <span ng-switch-when="false">
                        <span>{{'Admin.Js.OrderItemsSummary.Delivery' | translate}}</span>
                    </span>
                </span>

                <!--                <div class="relative inline"-->
                <!--                     is-mobile-->
                <!--                     ng-mouseenter="!isMobile.value ? $ctrl.popoverShippingOpen() : null"-->
                <!--                     ng-mouseleave="!isMobile.value ? $ctrl.popoverShippingClose() : null">-->
                <!--                    <a class="shippings-actions-toggle"-->
                <!--                       href=""-->
                <!--                       popover-trigger="'outsideClick'"-->
                <!--                       uib-popover-template="'shippingPopover'"-->
                <!--                       popover-class="popover&#45;&#45;with-form order-shipping__popover more-button-popover"-->
                <!--                       popover-is-open="$ctrl.popoverShippingIsOpen"-->
                <!--                       popover-placement="bottom-left">-->
                <!--                        <i class="fa fa-cog"></i>-->
                <!--                    </a>-->
                <!--                    <script type="text/ng-template" id="shippingPopover">-->
                <!--                        <div class="nav text-nowrap">-->
                <!--                            <ui-modal-trigger size="fixed-530" data-controller="'ModalShippingsTimeCtrl'"-->
                <!--                                              class="flex-grow-1"-->
                <!--                                              ng-class="{'more-button-popover__item': isMobile.value}"-->
                <!--                                              data-controller-as="ctrl"-->
                <!--                                              data-resolve="{ obj: { id: $ctrl.orderId }}"-->
                <!--                                              data-on-close="$ctrl.getOrderItemsSummary()"-->
                <!--                                              template-url="../areas/admin/content/src/order/modal/shippingsTime/shippingsTime.html">-->
                <!--                                <a href=""-->
                <!--                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, -->
                <!--                                                  'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}">-->
                <!--                                    <span class="btn-text">{{'Admin.Js.OrderItemsSummary.DateTimeDelivery' | translate}}</span>-->
                <!--                                </a>-->
                <!--                            </ui-modal-trigger>-->
                <!--                        </div>-->
                <!--                        <div ng-switch="$ctrl.Summary.ShippingType"-->
                <!--                             class="nav text-nowrap"-->
                <!--                             ng-if="!$ctrl.Summary.IsDraft">-->
                <!--                            <div ng-switch-when="sdek" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <div ng-include="$ctrl.sdekActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="checkoutru" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <a href=""-->
                <!--                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}"-->
                <!--                                   ng-click="$ctrl.createCheckoutRuOrder()">{{'Admin.Js.OrderItemsSummary.SendOrderToCheckoutRu' | translate}}</a>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="yandexdelivery"-->
                <!--                                 ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <a href=""-->
                <!--                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}"-->
                <!--                                   ng-click="$ctrl.createYandexDeliveryOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderYandexDelivery' | translate}}</a>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="yandexnewdelivery"-->
                <!--                                 ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <a href=""-->
                <!--                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}"-->
                <!--                                   ng-click="$ctrl.createYandexNewDeliveryOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderYandexDelivery' | translate}}</a>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="boxberry">-->
                <!--                                <div ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                    <a href=""-->
                <!--                                       ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}"-->
                <!--                                       ng-click="$ctrl.createBoxberryOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderBoxberry' | translate}}</a>-->
                <!--                                </div>-->
                <!--                                <div ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                    <a href=""-->
                <!--                                       ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}"-->
                <!--                                       ng-click="$ctrl.deleteBoxberryOrder()">{{'Admin.Js.OrderItemsSummary.DeleteDraftOrderBoxberry' | translate}}</a>-->
                <!--                                </div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="grastin" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <div ng-include="$ctrl.grastinActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="russianpost" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <div ng-include="$ctrl.russianPostActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="shiptor" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <div ng-include="$ctrl.shiptorActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="hermes" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <div ng-include="$ctrl.hermesActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="peceasyway" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <div ng-include="$ctrl.pecEasywayActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="pec" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <div ng-include="$ctrl.pecActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="pickpoint" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <div ng-include="$ctrl.pickPointActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="ozonrocket" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <div ng-include="$ctrl.ozonRocketActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="yandex">-->
                <!--                                <div ng-include="$ctrl.yandexActionsUrl"></div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="ddelivery">-->
                <!--                                <div ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                    <a href=""-->
                <!--                                       ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}"-->
                <!--                                       ng-click="$ctrl.createDdeliveryOrder()">{{'Admin.Js.OrderItemsSummary.DraftDDelivery' | translate}}</a>-->
                <!--                                </div>-->
                <!--                                <div ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                    <a href=""-->
                <!--                                       ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}"-->
                <!--                                       ng-if="$ctrl.isExistDdeliveryOrder"-->
                <!--                                       ng-click="$ctrl.getDdeliveryOrderInfo()">{{'Admin.Js.OrderItemsSummary.InformationDDelivery' | translate}}</a>-->
                <!--                                </div>-->
                <!--                                <div ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                    <a href=""-->
                <!--                                       ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}"-->
                <!--                                       ng-if="$ctrl.isExistDdeliveryOrder"-->
                <!--                                       ng-click="$ctrl.canselDdeliveryOrder()">{{'Admin.Js.OrderItemsSummary.CloseDDelivery' | translate}}</a>-->
                <!--                                </div>-->
                <!--                            </div>-->
                <!--                            <div ng-switch-when="sberlogistic" ng-class="{'more-button-popover__item': isMobile.value}">-->
                <!--                                <a href=""-->
                <!--                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn&#45;&#45;simple btn-link  btn&#45;&#45;with-icon btn&#45;&#45;horizontal-padding-zero more-button-popover__btn': isMobile.value}"-->
                <!--                                   ng-click="$ctrl.createSberlogisticOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderSberlogistic' | translate}}</a>-->
                <!--                            </div>-->
                <!--                        </div>-->
                <!--                    </script>-->
                <!--                </div>-->

                <div class="order-modal-descr m-b-sm order-items-summary__text" ng-if="$ctrl.Summary.OrderPickPoint != null">
                    {{$ctrl.Summary.OrderPickPoint.PickPointAddress}}
                </div>
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col bold">
            <span class="order-items-summary__text">+ <span ng-bind="$ctrl.Summary.ShippingCostStr"></span></span>
            <div
                class="relative inline"
                is-mobile
                ng-mouseenter="!isMobile.value ? $ctrl.popoverShippingOpen() : null"
                ng-mouseleave="!isMobile.value ? $ctrl.popoverShippingClose() : null">
                <a
                    class="shippings-actions-toggle"
                    href=""
                    popover-trigger="'outsideClick'"
                    uib-popover-template="'shippingPopover'"
                    popover-class="popover--with-form order-shipping__popover more-button-popover"
                    popover-is-open="$ctrl.popoverShippingIsOpen"
                    popover-placement="bottom-left">
                    <i class="fa fa-cog"></i>
                </a>

                <script type="text/ng-template" id="shippingPopover">
                    <div class="nav text-nowrap">
                        <ui-modal-trigger size="fixed-530" data-controller="'ModalShippingsTimeCtrl'"
                                          class="flex-grow-1"
                                          ng-class="{'more-button-popover__item': isMobile.value}"
                                          data-controller-as="ctrl"
                                          data-resolve="{ obj: { id: $ctrl.orderId }}"
                                          data-on-close="$ctrl.getOrderItemsSummary()"
                                          template-url="../areas/admin/content/src/order/modal/shippingsTime/shippingsTime.html">
                            <a href=""
                               ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value,
                                                  'btn btn--simple btn-link  btn--with-icon btn--horizontal-padding-zero more-button-popover__btn': isMobile.value}">
                                <span class="btn-text">{{'Admin.Js.OrderItemsSummary.DateTimeDelivery' | translate}}</span>
                            </a>
                        </ui-modal-trigger>
                    </div>
                    <div ng-switch="$ctrl.Summary.ShippingType"
                         class="nav text-nowrap"
                         ng-if="!$ctrl.Summary.IsDraft">
                        <div ng-switch-when="apiship" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.apiShipActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                        </div>
                        <div ng-switch-when="sdek" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.sdekActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.sdekActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="checkoutru" ng-class="{'more-button-popover__item': isMobile.value}">
                            <a href=""
                               ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn--simple btn-link  btn--with-icon btn--horizontal-padding-zero more-button-popover__btn': isMobile.value}"
                               ng-click="$ctrl.createCheckoutRuOrder()">{{'Admin.Js.OrderItemsSummary.SendOrderToCheckoutRu' | translate}}</a>
                        </div>

                        <div ng-switch-when="yandexdelivery"
                             ng-class="{'more-button-popover__item': isMobile.value}">
                            <a href=""
                               ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn--simple btn-link  btn--with-icon btn--horizontal-padding-zero more-button-popover__btn': isMobile.value}"
                               ng-click="$ctrl.createYandexDeliveryOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderYandexDelivery' | translate}}</a>
                        </div>

                        <div ng-switch-when="yandexnewdelivery"
                             ng-class="{'more-button-popover__item': isMobile.value}">
                            <a href=""
                               ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn--simple btn-link  btn--with-icon btn--horizontal-padding-zero more-button-popover__btn': isMobile.value}"
                               ng-click="$ctrl.createYandexNewDeliveryOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderYandexDelivery' | translate}}</a>
                        </div>

                        <div ng-switch-when="boxberry">
                            <div ng-class="{'more-button-popover__item': isMobile.value}">
                                <a href=""
                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn--simple btn-link  btn--with-icon btn--horizontal-padding-zero more-button-popover__btn': isMobile.value}"
                                   ng-click="$ctrl.createBoxberryOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderBoxberry' | translate}}</a>
                            </div>
                            <div ng-class="{'more-button-popover__item': isMobile.value}">
                                <a href=""
                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn--simple btn-link  btn--with-icon btn--horizontal-padding-zero more-button-popover__btn': isMobile.value}"
                                   ng-click="$ctrl.deleteBoxberryOrder()">{{'Admin.Js.OrderItemsSummary.DeleteDraftOrderBoxberry' | translate}}</a>
                            </div>
                        </div>

                        <div ng-switch-when="measoft" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.measoftActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                        </div>

                        <div ng-switch-when="grastin" ng-class="{'more-button-popover__item': isMobile.value && $ctrl.shippingContent.length}" ng-init="$ctrl.setShippingTypeContent($ctrl.grastinActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--<div ng-include="$ctrl.grastinActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="russianpost" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.russianPostActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.russianPostActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="shiptor" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.shiptorActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.shiptorActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="hermes" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.hermesActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.hermesActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="peceasyway" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.pecEasywayActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.pecEasywayActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="pec" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.pecActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.pecActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="pickpoint" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.pickPointActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.pickPointActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="ozonrocket" ng-class="{'more-button-popover__item': isMobile.value}" ng-init="$ctrl.setShippingTypeContent($ctrl.ozonRocketActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.ozonRocketActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="yandex" ng-init="$ctrl.setShippingTypeContent($ctrl.yandexActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.yandexActionsUrl"></div>-->
                        </div>

                        <div ng-switch-when="sberlogistic" ng-init="$ctrl.setShippingTypeContent($ctrl.sberlogisticActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                            <!--                            <div ng-include="$ctrl.sberlogisticActionsUrl"></div>-->
                        </div>
                        <div ng-switch-when="fivepost" ng-init="$ctrl.setShippingTypeContent($ctrl.fivePostActionsUrl)">
                            <div bind-html-compile="$ctrl.shippingContent" class="order-items-summary-additional"></div>
                        </div>

                        <div ng-switch-when="ddelivery">
                            <div ng-class="{'more-button-popover__item': isMobile.value}">
                                <a href=""
                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn--simple btn-link  btn--with-icon btn--horizontal-padding-zero more-button-popover__btn': isMobile.value}"
                                   ng-click="$ctrl.createDdeliveryOrder()">{{'Admin.Js.OrderItemsSummary.DraftDDelivery' | translate}}</a>
                            </div>
                            <div ng-class="{'more-button-popover__item': isMobile.value}">
                                <a href=""
                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn--simple btn-link  btn--with-icon btn--horizontal-padding-zero more-button-popover__btn': isMobile.value}"
                                   ng-if="$ctrl.isExistDdeliveryOrder"
                                   ng-click="$ctrl.getDdeliveryOrderInfo()">{{'Admin.Js.OrderItemsSummary.InformationDDelivery' | translate}}</a>
                            </div>
                            <div ng-class="{'more-button-popover__item': isMobile.value}">
                                <a href=""
                                   ng-class="{'m-t-xs m-b-xs block fs-xs': !isMobile.value, 'btn btn--simple btn-link  btn--with-icon btn--horizontal-padding-zero more-button-popover__btn': isMobile.value}"
                                   ng-if="$ctrl.isExistDdeliveryOrder"
                                   ng-click="$ctrl.canselDdeliveryOrder()">{{'Admin.Js.OrderItemsSummary.CloseDDelivery' | translate}}</a>
                            </div>
                        </div>
                    </div>
                </script>
            </div>
            <div ng-bind="$ctrl.Summary.ShippingName" class="m-b-xs order-items-summary__link"></div>
            <!--            <div class="relative" ng-switch="$ctrl.isEdit === true">-->
            <!--                <div ng-switch-when="true">-->
            <!--                    <ui-modal-trigger size="middle" data-controller="'ModalShippingsCtrl'" data-controller-as="ctrl"-->
            <!--                                      data-resolve="{ shippingMethodId: $ctrl.Summary.ShippingMethodId, order: { orderId: $ctrl.orderId, country: $ctrl.country, region: $ctrl.region, district: $ctrl.district, city: $ctrl.city, zip: $ctrl.zip, street: $ctrl.street, house: $ctrl.house, structure: $ctrl.structure, apartment: $ctrl.apartment, entrance: $ctrl.entrance, floor: $ctrl.floor }}"-->
            <!--                                      data-on-close="$ctrl.changeShipping(result)"-->
            <!--                                      template-url="../areas/admin/content/src/order/modal/shippings/shippings.html">-->
            <!--                        <a href="" ng-bind="$ctrl.Summary.ShippingName" class="m-b-xs order-items-summary__link"></a>-->
            <!--                    </ui-modal-trigger>-->
            <!--                </div>-->
            <!--                <div ng-switch-when="false">-->
            <!--                    <a href="" ng-click="$ctrl.onStopEdit({})">{{'Admin.Js.OrderItemsSummary.Delivery' | translate}}</a>-->
            <!--                </div>-->
            <!--            </div>-->

            <div
                class="m-b-sm order-items-summary__text"
                ng-if="$ctrl.Summary.DeliveryDate != null || ($ctrl.Summary.DeliveryTime != null && $ctrl.Summary.DeliveryTime.length > 0)">
                {{'Admin.Js.OrderItemsSummary.DeliveryDate' | translate}}
                <ui-modal-trigger
                    size="fixed-600"
                    data-controller="'ModalShippingsTimeCtrl'"
                    data-controller-as="ctrl"
                    data-resolve="{ obj: { id: $ctrl.orderId }}"
                    data-on-close="$ctrl.getOrderItemsSummary()"
                    template-url="../areas/admin/content/src/order/modal/shippingsTime/shippingsTime.html">
                    <a href="">
                        <span class="block">{{$ctrl.Summary.DeliveryDate}}</span>
                        <span
                            class="block"
                            ng-bind="$ctrl.Summary.DeliveryInterval.ReadableString != null
                              ? $ctrl.Summary.DeliveryInterval.ReadableString
                              : $ctrl.Summary.DeliveryTime"></span>
                    </a>
                </ui-modal-trigger>
            </div>
        </div>
    </div>

    <div class="row m-b-md order-items-summary__row">
        <div class="col-xs order-items-summary__col">
            <div class="text-right order-items-summary__text order-items-summary__text--alt">
                <div ng-switch="$ctrl.isEdit === true">
                    <div ng-switch-when="true">
                        <ui-modal-trigger
                            size="lg"
                            data-controller="'ModalPaymentsCtrl'"
                            data-controller-as="ctrl"
                            data-resolve="{ paymentMethodId: $ctrl.Summary.PaymentMethodId, order: { orderId: $ctrl.orderId, country: $ctrl.country, region: $ctrl.region, district: $ctrl.district, city: $ctrl.city }}"
                            data-on-close="$ctrl.changePayment(result)"
                            template-url="../areas/admin/content/src/order/modal/payments/payments.html">
                            <a href="" class="m-b-xs order-items-summary__link">{{'Admin.Js.OrderItemsSummary.Payment' | translate}}</a>
                        </ui-modal-trigger>
                    </div>
                    <div ng-switch-when="false">
                        <span>{{'Admin.Js.OrderItemsSummary.Payment' | translate}}</span>
                    </div>
                </div>

                <div ng-if="$ctrl.Summary.ShowSendBillingLink && !$ctrl.Summary.IsDraft" class="m-b-xs">
                    <ui-modal-trigger
                        data-controller="'ModalGetBillingLinkCtrl'"
                        data-controller-as="ctrl"
                        data-resolve="{params: { orderId: $ctrl.orderId }}"
                        template-url="../areas/admin/content/src/order/modal/getBillingLink/getBillingLink.html">
                        <a href="">{{'Admin.Js.OrderItemsSummary.PaymentLink' | translate}}</a>
                    </ui-modal-trigger>
                </div>

                <ng-form ng-if="!isMobile.value" novalidate="" name="paymentDetailsForm">
                    <div
                        class="order-modal-descr order-items-summary__text"
                        ng-if="$ctrl.Summary.PaymentDetails != null || $ctrl.Summary.ShowPrintPaymentDetails">
                        <div
                            class="m-b-xs"
                            ng-if="$ctrl.Summary.PaymentKey == 'bill' && $ctrl.Summary.ShowCompanyNamePaymentDetails || $ctrl.Summary.PaymentKey == 'billby' || $ctrl.Summary.PaymentKey == 'billkz'">
                            {{'Admin.Js.OrderItemsSummary.CompanyName'|translate}}
                            <input
                                type="text"
                                class="form-control payment-details-item input-alt"
                                name="paymentDetails.companyName"
                                ng-model="$ctrl.Summary.PaymentDetails.CompanyName"
                                ng-blur="paymentDetailsForm['paymentDetails.companyName'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div
                            class="m-b-xs"
                            ng-if="$ctrl.Summary.PaymentKey == 'sberbank' || $ctrl.Summary.PaymentKey == 'bill' && $ctrl.Summary.ShowInnPaymentDetails || $ctrl.Summary.PaymentKey == 'billby' || $ctrl.Summary.PaymentKey == 'billkz'">
                            {{'Admin.Js.OrderItemsSummary.INN'|translate}}
                            <input
                                type="text"
                                class="form-control payment-details-item input-alt"
                                name="paymentDetails.inn"
                                ng-model="$ctrl.Summary.PaymentDetails.INN"
                                ng-blur="paymentDetailsForm['paymentDetails.inn'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div class="m-b-xs" ng-if="$ctrl.Summary.PaymentKey == 'bill' && $ctrl.Summary.ShowInnPaymentDetails">
                            {{'Admin.Js.OrderItemsSummary.Kpp'|translate}}
                            <input
                                type="text"
                                class="form-control payment-details-item input-alt"
                                name="paymentDetails.kpp"
                                ng-model="$ctrl.Summary.PaymentDetails.Kpp"
                                ng-blur="paymentDetailsForm['paymentDetails.kpp'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div class="m-b-xs" ng-if="$ctrl.Summary.PaymentKey == 'billkz'">
                            {{'Admin.Js.OrderItemsSummary.Contract'|translate}}
                            <input
                                type="text"
                                class="form-control payment-details-item input-alt"
                                name="paymentDetails.contract"
                                ng-model="$ctrl.Summary.PaymentDetails.Contract"
                                ng-blur="paymentDetailsForm['paymentDetails.contract'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div class="m-b-xs" ng-if="$ctrl.Summary.PaymentKey == 'cash'">
                            {{'Admin.Js.OrderItemsSummary.Change'|translate}}
                            <input
                                type="text"
                                class="form-control payment-details-item input-alt"
                                name="paymentDetails.change"
                                ng-model="$ctrl.Summary.PaymentDetails.Change"
                                ng-blur="paymentDetailsForm['paymentDetails.change'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div class="m-b-xs" ng-if="$ctrl.Summary.PaymentKey == 'qiwi'">
                            {{'Admin.Js.OrderItemsSummary.Phone' | translate}}
                            <input
                                type="text"
                                class="form-control payment-details-item input-alt"
                                name="cpaymentDetails.phone"
                                data-mask-control
                                data-mask-control-preset="phone"
                                ng-model="$ctrl.Summary.PaymentDetails.Phone"
                                ng-blur="paymentDetailsForm['paymentDetails.phone'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div ng-if="$ctrl.Summary.ShowPrintPaymentDetails">
                            <a target="_blank" href="{{$ctrl.getPaymentDetailsLink()}}">{{$ctrl.Summary.PrintPaymentDetailsText}}</a>
                        </div>
                        <div
                            ng-if="$ctrl.Summary.ShowPrintPaymentDetails && ($ctrl.Summary.PaymentKey == 'bill' || $ctrl.Summary.PaymentKey == 'billby' || $ctrl.Summary.PaymentKey == 'billkz')">
                            <a target="_blank" href="{{$ctrl.getPaymentDetailsLink(true)}}"
                                >{{'Js.Payment.PaymentMethod.ButtonTextWithoutStamp' | translate}}</a
                            >
                        </div>
                    </div>
                </ng-form>
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col bold">
            <span class="order-items-summary__text">
                + <span ng-bind="$ctrl.Summary.PaymentCostStr"></span> ({{'Admin.Js.OrderItemsSummary.ExtraCharge' | translate}})
            </span>
            <!--            <div ng-switch="$ctrl.isEdit === true">-->
            <!--                <div ng-switch-when="true">-->
            <!--                    <ui-modal-trigger size="lg" data-controller="'ModalPaymentsCtrl'" data-controller-as="ctrl"-->
            <!--                                      data-resolve="{ paymentMethodId: $ctrl.Summary.PaymentMethodId, order: { orderId: $ctrl.orderId, country: $ctrl.country, region: $ctrl.region, district: $ctrl.district, city: $ctrl.city }}"-->
            <!--                                      data-on-close="$ctrl.changePayment(result)"-->
            <!--                                      template-url="../areas/admin/content/src/order/modal/payments/payments.html">-->
            <!--                        <a href="" ng-bind="$ctrl.Summary.PaymentName" class="m-b-xs order-items-summary__link"></a>-->
            <!--                    </ui-modal-trigger>-->
            <!--                </div>-->
            <!--                <div ng-switch-when="false">-->
            <!--                    <a href="" ng-click="$ctrl.onStopEdit({})">{{'Admin.Js.OrderItemsSummary.Payment' | translate}}</a>-->
            <!--                </div>-->
            <!--            </div>-->
            <div ng-bind="$ctrl.Summary.PaymentName" class="m-b-xs"></div>
        </div>
    </div>

    <div ng-if="isMobile.value">
        <ng-form novalidate="" name="paymentDetailsForm">
            <div
                class="order-modal-descr order-items-summary__text"
                ng-if="$ctrl.Summary.PaymentDetails != null || ctrl.Summary.ShowPrintPaymentDetails">
                <div
                    class="form-group"
                    ng-if="$ctrl.Summary.PaymentKey == 'bill' && $ctrl.Summary.ShowCompanyNamePaymentDetails || $ctrl.Summary.PaymentKey == 'billby' || $ctrl.Summary.PaymentKey == 'billkz'">
                    {{'Admin.Js.OrderItemsSummary.CompanyName'|translate}}
                    <input
                        type="text"
                        class="form-control payment-details-item input-alt"
                        name="paymentDetails.companyName"
                        ng-model="$ctrl.Summary.PaymentDetails.CompanyName"
                        ng-blur="paymentDetailsForm['paymentDetails.companyName'].modified === true && $ctrl.savePaymentDetails()" />
                </div>
                <div
                    class="form-group"
                    ng-if="$ctrl.Summary.PaymentKey == 'sberbank' || $ctrl.Summary.PaymentKey == 'bill' && $ctrl.Summary.ShowInnPaymentDetails || $ctrl.Summary.PaymentKey == 'billby' || $ctrl.Summary.PaymentKey == 'billkz'">
                    {{'Admin.Js.OrderItemsSummary.INN'|translate}}
                    <input
                        type="text"
                        class="form-control payment-details-item input-alt"
                        name="paymentDetails.inn"
                        ng-model="$ctrl.Summary.PaymentDetails.INN"
                        ng-blur="paymentDetailsForm['paymentDetails.inn'].modified === true && $ctrl.savePaymentDetails()" />
                </div>
                <div class="form-group" ng-if="$ctrl.Summary.PaymentKey == 'bill' && $ctrl.Summary.ShowInnPaymentDetails">
                    {{'Admin.Js.OrderItemsSummary.Kpp'|translate}}
                    <input
                        type="text"
                        class="form-control payment-details-item input-alt"
                        name="paymentDetails.kpp"
                        ng-model="$ctrl.Summary.PaymentDetails.Kpp"
                        ng-blur="paymentDetailsForm['paymentDetails.kpp'].modified === true && $ctrl.savePaymentDetails()" />
                </div>
                <div class="form-group" ng-if="$ctrl.Summary.PaymentKey == 'billkz'">
                    {{'Admin.Js.OrderItemsSummary.Contract'|translate}}
                    <input
                        type="text"
                        class="form-control payment-details-item input-alt"
                        name="paymentDetails.contract"
                        ng-model="$ctrl.Summary.PaymentDetails.Contract"
                        ng-blur="paymentDetailsForm['paymentDetails.contract'].modified === true && $ctrl.savePaymentDetails()" />
                </div>
                <div class="form-group" ng-if="$ctrl.Summary.PaymentKey == 'cash'">
                    {{'Admin.Js.OrderItemsSummary.Change'|translate}}
                    <input
                        type="text"
                        class="form-control payment-details-item input-alt"
                        name="paymentDetails.change"
                        ng-model="$ctrl.Summary.PaymentDetails.Change"
                        ng-blur="paymentDetailsForm['paymentDetails.change'].modified === true && $ctrl.savePaymentDetails()" />
                </div>
                <div class="form-group" ng-if="$ctrl.Summary.PaymentKey == 'qiwi'">
                    {{'Admin.Js.OrderItemsSummary.Phone' | translate}}
                    <input
                        type="text"
                        class="form-control payment-details-item input-alt"
                        name="cpaymentDetails.phone"
                        data-mask-control
                        data-mask-control-preset="phone"
                        ng-model="$ctrl.Summary.PaymentDetails.Phone"
                        ng-blur="paymentDetailsForm['paymentDetails.phone'].modified === true && $ctrl.savePaymentDetails()" />
                </div>
                <div class="form-group" ng-if="$ctrl.Summary.ShowPrintPaymentDetails">
                    <div class="m-b-xs">
                        <a target="_blank" href="{{$ctrl.getPaymentDetailsLink()}}">{{$ctrl.Summary.PrintPaymentDetailsText}}</a>
                    </div>
                    <div ng-if="($ctrl.Summary.PaymentKey == 'bill' || $ctrl.Summary.PaymentKey == 'billby' || $ctrl.Summary.PaymentKey == 'billkz')">
                        <a target="_blank" href="{{$ctrl.getPaymentDetailsLink(true)}}"
                            >{{'Js.Payment.PaymentMethod.ButtonTextWithoutStamp' | translate}}</a
                        >
                    </div>
                </div>
            </div>
        </ng-form>
    </div>

    <div class="row m-b-md order-items-summary__row" ng-if="$ctrl.Summary.Taxes != null" ng-repeat="tax in $ctrl.Summary.Taxes track by $index">
        <div class="col-xs order-items-summary__col">
            <div class="text-right order-items-summary__text order-items-summary__text--alt" ng-bind-html="tax.Key"></div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col bold">
            <span class="order-items-summary__text" ng-bind-html="tax.Value"></span>
        </div>
    </div>

    <div class="row m-b-md bold f-s-18 order-items-summary__row">
        <div class="col-xs order-items-summary__col">
            <div class="order-items-summary__summary text-right">{{'Admin.Js.OrderItemsSummary.Summary' | translate}}</div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col bold">
            <span class="order-items-summary__summary" ng-bind="$ctrl.Summary.SumStr" data-e2e="OrderSum"></span>
        </div>
    </div>

    <div class="row order-items-summary__row" ng-if="$ctrl.Summary.BonusCardPurchase != null">
        <div class="col-xs order-items-summary__col">
            <div data-e2e="NameBonus" class="text-right order-items-summary__text order-items-summary__text--alt">
                <span ng-if="$ctrl.Summary.BonusCardPurchase.Status == 1">{{'Admin.Js.OrderItemsSummary.BonusesToCard' | translate}}</span>
                <span
                    ng-if="$ctrl.Summary.BonusCardPurchase.Status != 1"
                    ng-bind-html="'Admin.Js.OrderItemsSummary.BonusesToCardAfterPayment'|translate"></span>
            </div>
        </div>
        <div data-e2e="CountBonus" class="col-xs flex-grow-n order-items-summary-col-value order-items-summary__col bold">
            <span class="order-items-summary__text" ng-bind="$ctrl.Summary.BonusCardPurchase.NewBonusAmount.toFixed(2)"></span>
        </div>
    </div>
</div>
